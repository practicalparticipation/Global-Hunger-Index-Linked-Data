<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0" exclude-result-prefixes="res xsl"  xmlns="http://www.w3.org/1999/xhtml" xmlns:res="http://www.w3.org/2005/sparql-results#"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:owl="http://www.w3.org/2002/07/owl#"
	xmlns:ghiqb="http://data.ifpri.org/rdf/ghi/structure/#"
	xmlns:qb="http://purl.org/linked-data/cube#">
	<xsl:output method="xml" indent="yes" media-type="application/xml"/>

<xsl:template match="*">
	<rdf:RDF>
		<xsl:for-each select="//res:result">
			<rdf:Description rdf:about="http://data.ifpri.org/rdf/ghi/2010/qb/#observation-{substring(string(res:binding[@name='observation']/res:uri),61)}">
				<owl:sameAs><xsl:value-of select="res:binding[@name='observation']/res:uri"/></owl:sameAs>
				<ghiqb:refArea rdf:resource="{res:binding[@name='area']/res:uri}"/>
				<ghiqb:refPeriod rdf:datatype="http://www.w3.org/2001/XMLSchema#date"><xsl:value-of select="res:binding[@name='period']/res:literal"/>-01-01</ghiqb:refPeriod>
				<ghiqb:ghi><xsl:value-of select="res:binding[@name='ghi']/res:literal"/></ghiqb:ghi>
				<ghiqb:supportingData-pun rdf:datatype="http://www.w3.org/2001/XMLSchema#double"><xsl:value-of select="res:binding[@name='punValue']/res:literal"/></ghiqb:supportingData-pun>
				<ghiqb:supporingData-cuw rdf:datatype="http://www.w3.org/2001/XMLSchema#double"><xsl:value-of select="res:binding[@name='cuwValue']/res:literal"/></ghiqb:supporingData-cuw>
				<ghiqb:supportingData-cm rdf:datatype="http://www.w3.org/2001/XMLSchema#double"><xsl:value-of select="res:binding[@name='cmValue']/res:literal"/></ghiqb:supportingData-cm>
				<qb:dataSet rdf:resource="http://data.ifpri.org/rdf/ghi/2010/qb/#2010-GHI-Report"/>	
			</rdf:Description>
		</xsl:for-each>
	</rdf:RDF>
</xsl:template>
	
	
</xsl:stylesheet>